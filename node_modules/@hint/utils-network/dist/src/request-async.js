"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.requestAsync = void 0;

const https = require("https");
const requestAsync = async (url, options = {}) => {
    let isHTTPS = false;
    if (url.startsWith('https')) {
        isHTTPS = true;
    }
    if (options.strictSSL || isHTTPS) {
        let httpsAgentOptions;
        if (options.rejectUnauthorized !== undefined) {
            httpsAgentOptions = { rejectUnauthorized: options.rejectUnauthorized };
        }
        const httpsAgent = new https.Agent(httpsAgentOptions);
        options.agent = httpsAgent;
    }
    const fetch = (...args) => import('node-fetch').then(({default: fetch}) => fetch(...args));

    const response = await fetch(url, options);
    return await response.text();
};
exports.requestAsync = requestAsync;
